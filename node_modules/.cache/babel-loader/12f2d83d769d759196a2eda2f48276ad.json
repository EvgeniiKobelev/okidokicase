{"remainingRequest":"/Users/user/Desktop/okidokicasedev/node_modules/thread-loader/dist/cjs.js!/Users/user/Desktop/okidokicasedev/node_modules/babel-loader/lib/index.js!/Users/user/Desktop/okidokicasedev/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/Desktop/okidokicasedev/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/user/Desktop/okidokicasedev/src/views/Cases.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/user/Desktop/okidokicasedev/src/views/Cases.vue","mtime":1624184953232},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3VzZXIvRGVza3RvcC9va2lkb2tpY2FzZWRldi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvdXNlci9EZXNrdG9wL29raWRva2ljYXNlZGV2L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgImZpcmViYXNlL3N0b3JhZ2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYnM6IG51bGwsCiAgICAgIGFkZEZvcm06IGZhbHNlLAogICAgICBzcGFzaWJvWmFPdHppdjogIiIsCiAgICAgIG5henZhbmllOiAiIiwKICAgICAgb3Bpc2FuaWU6ICIiLAogICAgICBjYXNlczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMudGFicyA9IE0uVGFicy5pbml0KF90aGlzLiRyZWZzLnRhYnMpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goImZldGNoQ2FzZXMiKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfdGhpcy5jYXNlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoWyJ1cGRhdGVJbmZvIl0pKSwge30sIHsKICAgIGFkZE90eml2OiBmdW5jdGlvbiBhZGRPdHppdigpIHsKICAgICAgdGhpcy5hZGRGb3JtID0gdHJ1ZTsKICAgIH0sCiAgICBPdHByYXZpdE90eml2OiBmdW5jdGlvbiBPdHByYXZpdE90eml2KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB1aWQsIGlkQ2FzZSwgbWV0YURhdGEsIHN0b3JhZ2VSZWYsIGltYWdlUmVmLCBkb3dubG9hZFVybDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLnNwYXNpYm9aYU90eml2ID0gItCS0LDRiCDQvtGC0LfRi9CyINGD0YHQv9C10YjQvdC+INC00L7QsdCw0LLQu9C10L0hIjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCJnZXRVaWQiKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdWlkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBpZENhc2UgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgbWV0YURhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAiaW1hZ2UvcG5nIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCk7CiAgICAgICAgICAgICAgICBpbWFnZVJlZiA9IHN0b3JhZ2VSZWYuY2hpbGQoImltYWdlcy8iLmNvbmNhdCh1aWQsICIvY2FzZXMvIikuY29uY2F0KF90aGlzMi5pbWFnZURhdGEubmFtZSkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZVJlZi5wdXQoX3RoaXMyLmltYWdlRGF0YSwgbWV0YURhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZVJlZi5nZXREb3dubG9hZFVSTCgpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgZG93bmxvYWRVcmwgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIi9jYXNlcy8iLmNvbmNhdChpZENhc2UpKS5zZXQoewogICAgICAgICAgICAgICAgICBpbWFnZVVybDogZG93bmxvYWRVcmwsCiAgICAgICAgICAgICAgICAgIG5henZhbmllOiBfdGhpczIubmF6dmFuaWUsCiAgICAgICAgICAgICAgICAgIG9waXNhbmllOiBfdGhpczIub3Bpc2FuaWUsCiAgICAgICAgICAgICAgICAgIGF1dGhvcjogdWlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHByZXZpZXdJbWFnZTogZnVuY3Rpb24gcHJldmlld0ltYWdlKGV2ZW50KSB7CiAgICAgIHRoaXMuaW1hZ2VEYXRhID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgfQogIH0pLAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsiaW5mbyJdKSkKfTs="},{"version":3,"sources":["/Users/user/Desktop/okidokicasedev/src/views/Cases.vue"],"names":[],"mappings":";;;;;;AAgFA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,OAAO,QAAP,MAAqB,cAArB;AACA,OAAO,kBAAP;AACA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,IAAI,EAAE,IADD;AAEL,MAAA,OAAO,EAAE,KAFJ;AAGL,MAAA,cAAc,EAAE,EAHX;AAIL,MAAA,QAAQ,EAAE,EAJL;AAKL,MAAA,QAAQ,EAAE,EALL;AAML,MAAA,KAAK,EAAE;AANF,KAAP;AAQD,GAVY;AAWP,EAAA,OAXO,qBAWG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,cAAA,KAAI,CAAC,IAAL,GAAY,CAAC,CAAC,IAAF,CAAO,IAAP,CAAY,KAAI,CAAC,KAAL,CAAW,IAAvB,CAAZ;AADc;AAAA,qBAEK,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,YAArB,CAFL;;AAAA;AAEd,cAAA,KAAI,CAAC,KAFS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGf,GAdY;AAeb,EAAA,OAAO,kCACF,UAAU,CAAC,CAAC,YAAD,CAAD,CADR;AAEL,IAAA,QAFK,sBAEM;AACT,WAAK,OAAL,GAAe,IAAf;AACD,KAJI;AAKC,IAAA,aALD,2BAKiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACpB,gBAAA,MAAI,CAAC,cAAL,GAAsB,6BAAtB;AADoB;AAAA,uBAGF,MAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,QAArB,CAHE;;AAAA;AAGd,gBAAA,GAHc;AAId,gBAAA,MAJc,GAIL,IAAI,IAAJ,EAJK;AAKd,gBAAA,QALc,GAKH;AACf,kBAAA,WAAW,EAAE;AADE,iBALG;AAQd,gBAAA,UARc,GAQD,QAAQ,CAAC,OAAT,GAAmB,GAAnB,EARC;AASd,gBAAA,QATc,GASH,UAAU,CAAC,KAAX,kBACL,GADK,oBACQ,MAAI,CAAC,SAAL,CAAe,IADvB,EATG;AAAA;AAAA,uBAYd,QAAQ,CAAC,GAAT,CAAa,MAAI,CAAC,SAAlB,EAA6B,QAA7B,CAZc;;AAAA;AAAA;AAAA,uBAaM,QAAQ,CAAC,cAAT,EAbN;;AAAA;AAad,gBAAA,WAbc;AAAA;AAAA,uBAed,QAAQ,CAAC,QAAT,GAAoB,GAApB,kBAAkC,MAAlC,GAA4C,GAA5C,CAAgD;AACpD,kBAAA,QAAQ,EAAE,WAD0C;AAEpD,kBAAA,QAAQ,EAAE,MAAI,CAAC,QAFqC;AAGpD,kBAAA,QAAQ,EAAE,MAAI,CAAC,QAHqC;AAIpD,kBAAA,MAAM,EAAE;AAJ4C,iBAAhD,CAfc;;AAAA;AAqBpB,gBAAA,MAAM,CAAC,QAAP,CAAgB,MAAhB;;AArBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBrB,KA3BI;AA4BL,IAAA,YA5BK,wBA4BQ,KA5BR,EA4Be;AAClB,WAAK,SAAL,GAAiB,KAAK,CAAC,MAAN,CAAa,KAAb,CAAmB,CAAnB,CAAjB;AACD;AA9BI,IAfM;AA+Cb,EAAA,QAAQ,oBACH,UAAU,CAAC,CAAC,MAAD,CAAD,CADP;AA/CK,CAAf","sourcesContent":["<template>\n  <div class=\"row center\">\n    <div class=\"col m6 offset-m3 s12\">\n      <table>\n        <tr>\n          <td>\n            <h5>Отзывы</h5>\n          </td>\n          <td>\n            <button @click=\"addOtziv\" class=\"btn right orange accent-4\">\n              Добавить свой\n            </button>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n  <div class=\"row\" v-if=\"addForm\">\n    <div class=\"col s12 m6 offset-m3 center\">\n      <table class=\"striped\">\n        <tr>\n          <td>Название:</td>\n          <td>\n            <input type=\"text\" v-model=\"nazvanie\" />\n          </td>\n        </tr>\n        <tr>\n          <td>Описание:</td>\n          <td>\n            <textarea\n              class=\"materialize-textarea\"\n              v-model=\"opisanie\"\n            ></textarea>\n          </td>\n        </tr>\n      </table>\n      <div class=\"row\">\n        <div class=\"file-field input-field\">\n          <div class=\"btn orange accent-4\">\n            <span>Фото подарка</span>\n            <input\n              id=\"file\"\n              type=\"file\"\n              @change=\"previewImage\"\n              accept=\"image/*\"\n            />\n          </div>\n          <div class=\"file-path-wrapper\">\n            <input class=\"file-path validate\" type=\"text\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"\">\n        <button @click=\"OtpravitOtziv\" class=\"btn orange accent-4\">\n          Добавить\n        </button>\n      </div>\n      <div class=\"section\" v-text=\"spasiboZaOtziv\"></div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col center m6 offset-m3\">\n      <div v-for=\"num of cases\" :key=\"num\" class=\"card\">\n        <div class=\"card-image\">\n          <img :src=\"num.imageUrl\" />\n          <span class=\"card-title orange accent-4\">{{ num.nazvanie }}</span>\n        </div>\n        <div class=\"card-content\">\n          <p>\n            {{ num.opisanie }}\n          </p>\n        </div>\n        <!-- <div class=\"card-action\">\n          <a href=\"#\">Читать подробнее</a>\n        </div> -->\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\nexport default {\n  data() {\n    return {\n      tabs: null,\n      addForm: false,\n      spasiboZaOtziv: \"\",\n      nazvanie: \"\",\n      opisanie: \"\",\n      cases: [],\n    };\n  },\n  async mounted() {\n    this.tabs = M.Tabs.init(this.$refs.tabs);\n    this.cases = await this.$store.dispatch(\"fetchCases\");\n  },\n  methods: {\n    ...mapActions([\"updateInfo\"]),\n    addOtziv() {\n      this.addForm = true;\n    },\n    async OtpravitOtziv() {\n      this.spasiboZaOtziv = \"Ваш отзыв успешно добавлен!\";\n\n      const uid = await this.$store.dispatch(\"getUid\");\n      const idCase = new Date();\n      const metaData = {\n        contentType: \"image/png\",\n      };\n      const storageRef = firebase.storage().ref();\n      const imageRef = storageRef.child(\n        `images/${uid}/cases/${this.imageData.name}`\n      );\n      await imageRef.put(this.imageData, metaData);\n      const downloadUrl = await imageRef.getDownloadURL();\n      // add case\n      await firebase.database().ref(`/cases/${idCase}`).set({\n        imageUrl: downloadUrl,\n        nazvanie: this.nazvanie,\n        opisanie: this.opisanie,\n        author: uid,\n      });\n      window.location.reload();\n    },\n    previewImage(event) {\n      this.imageData = event.target.files[0];\n    },\n  },\n  computed: {\n    ...mapGetters([\"info\"]),\n  },\n};\n</script>\n"],"sourceRoot":""}]}