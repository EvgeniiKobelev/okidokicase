{"remainingRequest":"/Users/user/Desktop/okidokicasedev/node_modules/babel-loader/lib/index.js!/Users/user/Desktop/okidokicasedev/src/store/auth.js","dependencies":[{"path":"/Users/user/Desktop/okidokicasedev/src/store/auth.js","mtime":1617543158329},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/okidokicasedev/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy91c2VyL0Rlc2t0b3Avb2tpZG9raWNhc2VkZXYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UvYXBwIjsKaW1wb3J0ICJmaXJlYmFzZS9zdG9yYWdlIjsKZXhwb3J0IGRlZmF1bHQgewogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkaXNwYXRjaCwgY29tbWl0LCBlbWFpbCwgcGFzc3dvcmQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLCBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIGVtYWlsID0gX3JlZjIuZW1haWwsIHBhc3N3b3JkID0gX3JlZjIucGFzc3dvcmQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRFcnJvciIsIF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCA3XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjMsIF9yZWY0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBkaXNwYXRjaCwgY29tbWl0LCBlbWFpbCwgcGFzc3dvcmQsIG5hbWUsIGRhdGUsIGltYWdlRGF0YSwgdWlkLCBzdG9yYWdlUmVmLCBpbWFnZVJlZiwgZG93bmxvYWRVcmwsIG1ldGFEYXRhLCBfc3RvcmFnZVJlZiwgX2ltYWdlUmVmLCBfZG93bmxvYWRVcmw7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoLCBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgICAgICBlbWFpbCA9IF9yZWY0LmVtYWlsLCBwYXNzd29yZCA9IF9yZWY0LnBhc3N3b3JkLCBuYW1lID0gX3JlZjQubmFtZSwgZGF0ZSA9IF9yZWY0LmRhdGUsIGltYWdlRGF0YSA9IF9yZWY0LmltYWdlRGF0YTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgiZ2V0VWlkIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHVpZCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGltYWdlRGF0YSA9PT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpOwogICAgICAgICAgICAgICAgaW1hZ2VSZWYgPSBzdG9yYWdlUmVmLmNoaWxkKCJpbWFnZXMvbm9hdmF0YXIucG5nIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlUmVmLmdldERvd25sb2FkVVJMKCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBkb3dubG9hZFVybCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiL3VzZXJzLyIuY29uY2F0KHVpZCwgIi9pbmZvIikpLnNldCh7CiAgICAgICAgICAgICAgICAgIHN0YXJzOiAwLAogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLAogICAgICAgICAgICAgICAgICBhdmF0YXJJbWc6IGRvd25sb2FkVXJsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIG1ldGFEYXRhID0gewogICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogImltYWdlL3BuZyIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKTsKICAgICAgICAgICAgICAgIF9pbWFnZVJlZiA9IF9zdG9yYWdlUmVmLmNoaWxkKCJpbWFnZXMvIi5jb25jYXQodWlkLCAiLnBuZyIpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2ltYWdlUmVmLnB1dChpbWFnZURhdGEsIG1ldGFEYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICByZXR1cm4gX2ltYWdlUmVmLmdldERvd25sb2FkVVJMKCk7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICBfZG93bmxvYWRVcmwgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIi91c2Vycy8iLmNvbmNhdCh1aWQsICIvaW5mbyIpKS5zZXQoewogICAgICAgICAgICAgICAgICBzdGFyczogMCwKICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZSwKICAgICAgICAgICAgICAgICAgYXZhdGFySW1nOiBfZG93bmxvYWRVcmwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgic2V0RXJyb3IiLCBfY29udGV4dDIudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQyLnQwOwoKICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDMwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRVaWQ6IGZ1bmN0aW9uIGdldFVpZCgpIHsKICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CiAgICAgIHJldHVybiB1c2VyID8gdXNlci51aWQgOiBudWxsOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY1KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjb21taXQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjb21taXQoImNsZWFySW5mbyIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/user/Desktop/okidokicasedev/src/store/auth.js"],"names":["firebase","actions","login","dispatch","commit","email","password","auth","signInWithEmailAndPassword","register","name","date","imageData","createUserWithEmailAndPassword","uid","undefined","storageRef","storage","ref","imageRef","child","getDownloadURL","downloadUrl","database","set","stars","avatarImg","metaData","contentType","put","getUid","user","currentUser","logout","signOut"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,kBAAP;AACA,eAAe;AACbC,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC,8BACgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzCC,gBAAAA,QAAyC,QAAzCA,QAAyC,EAA/BC,MAA+B,QAA/BA,MAA+B;AAAnBC,gBAAAA,KAAmB,SAAnBA,KAAmB,EAAZC,QAAY,SAAZA,QAAY;AAAA;AAAA;AAAA,uBAE7CN,QAAQ,CAACO,IAAT,GAAgBC,0BAAhB,CAA2CH,KAA3C,EAAkDC,QAAlD,CAF6C;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAInDF,gBAAAA,MAAM,CAAC,UAAD,cAAN;AAJmD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOtD,KARM;AASDK,IAAAA,QATC,kCAYL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAFEN,gBAAAA,QAEF,SAFEA,QAEF,EAFYC,MAEZ,SAFYA,MAEZ;AADEC,gBAAAA,KACF,SADEA,KACF,EADSC,QACT,SADSA,QACT,EADmBI,IACnB,SADmBA,IACnB,EADyBC,IACzB,SADyBA,IACzB,EAD+BC,SAC/B,SAD+BA,SAC/B;AAAA;AAAA;AAAA,uBAEQZ,QAAQ,CAACO,IAAT,GAAgBM,8BAAhB,CAA+CR,KAA/C,EAAsDC,QAAtD,CAFR;;AAAA;AAAA;AAAA,uBAGoBH,QAAQ,CAAC,QAAD,CAH5B;;AAAA;AAGQW,gBAAAA,GAHR;;AAAA,sBAKMF,SAAS,KAAKG,SALpB;AAAA;AAAA;AAAA;;AAMUC,gBAAAA,UANV,GAMuBhB,QAAQ,CAACiB,OAAT,GAAmBC,GAAnB,EANvB;AAOUC,gBAAAA,QAPV,GAOqBH,UAAU,CAACI,KAAX,uBAPrB;AAAA;AAAA,uBAQ8BD,QAAQ,CAACE,cAAT,EAR9B;;AAAA;AAQUC,gBAAAA,WARV;AAAA;AAAA,uBAUUtB,QAAQ,CAACuB,QAAT,GAAoBL,GAApB,kBAAkCJ,GAAlC,YAA8CU,GAA9C,CAAkD;AACtDC,kBAAAA,KAAK,EAAE,CAD+C;AAEtDf,kBAAAA,IAAI,EAAEA,IAFgD;AAGtDC,kBAAAA,IAAI,EAAEA,IAHgD;AAItDe,kBAAAA,SAAS,EAAEJ;AAJ2C,iBAAlD,CAVV;;AAAA;AAAA;AAAA;;AAAA;AAiBUK,gBAAAA,QAjBV,GAiBqB;AACfC,kBAAAA,WAAW,EAAE;AADE,iBAjBrB;AAoBUZ,gBAAAA,WApBV,GAoBuBhB,QAAQ,CAACiB,OAAT,GAAmBC,GAAnB,EApBvB;AAqBUC,gBAAAA,SArBV,GAqBqBH,WAAU,CAACI,KAAX,kBAA2BN,GAA3B,UArBrB;AAAA;AAAA,uBAsBUK,SAAQ,CAACU,GAAT,CAAajB,SAAb,EAAwBe,QAAxB,CAtBV;;AAAA;AAAA;AAAA,uBAuB8BR,SAAQ,CAACE,cAAT,EAvB9B;;AAAA;AAuBUC,gBAAAA,YAvBV;AAAA;AAAA,uBAyBUtB,QAAQ,CAACuB,QAAT,GAAoBL,GAApB,kBAAkCJ,GAAlC,YAA8CU,GAA9C,CAAkD;AACtDC,kBAAAA,KAAK,EAAE,CAD+C;AAEtDf,kBAAAA,IAAI,EAAEA,IAFgD;AAGtDC,kBAAAA,IAAI,EAAEA,IAHgD;AAItDe,kBAAAA,SAAS,EAAEJ;AAJ2C,iBAAlD,CAzBV;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAiCElB,gBAAAA,MAAM,CAAC,UAAD,eAAN;AAjCF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCD,KAhDM;AAiDP0B,IAAAA,MAjDO,oBAiDE;AACP,UAAMC,IAAI,GAAG/B,QAAQ,CAACO,IAAT,GAAgByB,WAA7B;AACA,aAAOD,IAAI,GAAGA,IAAI,CAACjB,GAAR,GAAc,IAAzB;AACD,KApDM;AAqDDmB,IAAAA,MArDC,yBAqDkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAV7B,gBAAAA,MAAU,SAAVA,MAAU;AAAA;AAAA,uBACjBJ,QAAQ,CAACO,IAAT,GAAgB2B,OAAhB,EADiB;;AAAA;AAEvB9B,gBAAAA,MAAM,CAAC,WAAD,CAAN;;AAFuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGxB;AAxDM;AADI,CAAf","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/storage\";\nexport default {\n  actions: {\n    async login({ dispatch, commit }, { email, password }) {\n      try {\n        await firebase.auth().signInWithEmailAndPassword(email, password);\n      } catch (error) {\n        commit(\"setError\", error);\n        throw error;\n      }\n    },\n    async register(\n      { dispatch, commit },\n      { email, password, name, date, imageData }\n    ) {\n      try {\n        await firebase.auth().createUserWithEmailAndPassword(email, password);\n        const uid = await dispatch(\"getUid\");\n        // add avatar\n        if (imageData === undefined) {\n          const storageRef = firebase.storage().ref();\n          const imageRef = storageRef.child(`images/noavatar.png`);\n          const downloadUrl = await imageRef.getDownloadURL();\n          // add users\n          await firebase.database().ref(`/users/${uid}/info`).set({\n            stars: 0,\n            name: name,\n            date: date,\n            avatarImg: downloadUrl,\n          });\n        } else {\n          const metaData = {\n            contentType: \"image/png\",\n          };\n          const storageRef = firebase.storage().ref();\n          const imageRef = storageRef.child(`images/${uid}.png`);\n          await imageRef.put(imageData, metaData);\n          const downloadUrl = await imageRef.getDownloadURL();\n          // add users\n          await firebase.database().ref(`/users/${uid}/info`).set({\n            stars: 0,\n            name: name,\n            date: date,\n            avatarImg: downloadUrl,\n          });\n        }\n      } catch (error) {\n        commit(\"setError\", error);\n        throw error;\n      }\n    },\n    getUid() {\n      const user = firebase.auth().currentUser;\n      return user ? user.uid : null;\n    },\n    async logout({ commit }) {\n      await firebase.auth().signOut();\n      commit(\"clearInfo\");\n    },\n  },\n};\n"]}]}